---
phase: 01-wikelo-data-model
plan: 01
type: execute
---

<objective>
Define core Rust types for Wikelo items and their source locations.

Purpose: Establish the foundational data structures that represent what items Wikelo accepts and where those items come from. These types enable source location flagging - the core value of knowing "ships leaving X location likely carry Y valuable items."

Output: `crates/intel/src/wikelo/types.rs` with WikieloItem, ItemSource, ItemCategory, and SourceLocation types.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Codebase patterns to follow:**
@crates/intel/src/ships/types.rs - Existing type patterns with Serde derives
@crates/intel/src/lib.rs - Module re-export pattern

**Key context from PROJECT.md:**
- Wikelo items come from: creature hunting, mining, mission rewards, combat loot
- Source locations must map to existing terminal/location naming (for integration with route analysis)
- Static/offline-first - no live lookups needed
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create wikelo module structure</name>
  <files>crates/intel/src/wikelo/mod.rs, crates/intel/src/wikelo/types.rs, crates/intel/src/lib.rs</files>
  <action>
Create new wikelo module in crates/intel/src/:
1. Create `wikelo/mod.rs` with `mod types; pub use types::*;`
2. Create `wikelo/types.rs` for type definitions
3. Add `mod wikelo; pub use wikelo::*;` to `crates/intel/src/lib.rs`

Follow existing module pattern from ships/ directory.
  </action>
  <verify>cargo check -p intel passes</verify>
  <done>Module structure exists, lib.rs exports wikelo types</done>
</task>

<task type="auto">
  <name>Task 2: Define ItemCategory enum</name>
  <files>crates/intel/src/wikelo/types.rs</files>
  <action>
Define ItemCategory enum representing Wikelo item sources:

```rust
/// Categories of items that Wikelo accepts, based on acquisition method.
#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Serialize, Deserialize)]
pub enum ItemCategory {
    /// Creature parts from hunting (Valakkar, Kopion, Yormandi, Grazer)
    CreaturePart,
    /// Mined materials (Carinite, Quantanium, ores)
    MinedMaterial,
    /// Mission reward currencies (MG Scrip, Council Scrip)
    MissionCurrency,
    /// Combat loot from Vanduul or other enemies
    CombatLoot,
    /// Equipment and components (drives, boards)
    Equipment,
    /// Trade commodities (SCU goods)
    Commodity,
}
```

Include doc comments explaining each variant with examples.
  </action>
  <verify>cargo check -p intel passes</verify>
  <done>ItemCategory enum defined with all variants and doc comments</done>
</task>

<task type="auto">
  <name>Task 3: Define SourceLocation and ItemSource types</name>
  <files>crates/intel/src/wikelo/types.rs</files>
  <action>
Define types for where items come from:

```rust
/// A location where Wikelo items can be acquired.
#[derive(Debug, Clone, PartialEq, Eq, Hash, Serialize, Deserialize)]
pub struct SourceLocation {
    /// Location name (should match terminal naming for route integration)
    /// Examples: "Lazarus Transport Centers", "ARC-L1", "Pyro I"
    pub name: String,
    /// Star system containing this location
    pub system: String,
    /// Brief description of what happens here
    pub description: Option<String>,
}

/// How an item is obtained at a source location.
#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Serialize, Deserialize)]
pub enum AcquisitionMethod {
    /// Hunt creatures at this location
    Hunting,
    /// Mine resources at this location
    Mining,
    /// Complete missions that reward this item
    Mission,
    /// Loot from combat encounters
    Combat,
    /// Purchase from shops/kiosks
    Purchase,
    /// Salvage from wrecks
    Salvage,
}

/// A source for a specific item - where and how to get it.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ItemSource {
    /// The location where this item can be acquired
    pub location: SourceLocation,
    /// How the item is acquired at this location
    pub method: AcquisitionMethod,
    /// Relative abundance/reliability (1-5, 5 = very common/reliable)
    pub reliability: u8,
    /// Notes about acquisition (spawn times, requirements, etc.)
    pub notes: Option<String>,
}
```

Use existing patterns from ships/types.rs for struct layout and derives.
  </action>
  <verify>cargo check -p intel passes</verify>
  <done>SourceLocation, AcquisitionMethod, and ItemSource types defined</done>
</task>

<task type="auto">
  <name>Task 4: Define WikieloItem type</name>
  <files>crates/intel/src/wikelo/types.rs</files>
  <action>
Define the main WikieloItem type:

```rust
/// An item that Wikelo accepts in trade contracts.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct WikieloItem {
    /// Unique identifier for the item (e.g., "irradiated_valakkar_fang_apex")
    pub id: String,
    /// Display name (e.g., "Irradiated Valakkar Fang (Apex)")
    pub name: String,
    /// Category of item
    pub category: ItemCategory,
    /// Known source locations for this item
    pub sources: Vec<ItemSource>,
    /// Estimated market value in aUEC (if known)
    pub estimated_value: Option<u64>,
    /// Whether this item is stackable in inventory
    pub stackable: bool,
    /// Size in SCU if applicable (for commodities)
    pub scu_per_unit: Option<f64>,
}

impl WikieloItem {
    /// Get the primary source location (highest reliability).
    #[must_use]
    pub fn primary_source(&self) -> Option<&ItemSource> {
        self.sources.iter().max_by_key(|s| s.reliability)
    }

    /// Get all systems where this item can be found.
    #[must_use]
    pub fn source_systems(&self) -> Vec<&str> {
        self.sources
            .iter()
            .map(|s| s.location.system.as_str())
            .collect::<std::collections::HashSet<_>>()
            .into_iter()
            .collect()
    }
}
```

Follow CargoShip pattern for impl methods (#[must_use], doc comments).
  </action>
  <verify>cargo check -p intel passes, cargo clippy -p intel passes</verify>
  <done>WikieloItem type defined with helper methods</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cargo check -p intel` passes without errors
- [ ] `cargo clippy -p intel` passes without warnings
- [ ] `cargo test -p intel` passes (existing tests still work)
- [ ] Types are exported from `crates/intel/src/lib.rs`
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- WikieloItem, ItemSource, ItemCategory, SourceLocation types defined
- Types follow existing codebase patterns (Serde derives, doc comments, #[must_use])
- Module properly integrated into intel crate
</success_criteria>

<output>
After completion, create `.planning/phases/01-wikelo-data-model/01-01-SUMMARY.md` using the summary template.
</output>
