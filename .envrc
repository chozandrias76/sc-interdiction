# direnv configuration for sc-interdiction project

# Path to SCLogistics repository (required for build-time schema generation)
export SCLOGISTICS_PATH="/home/choza/projects/SCLogistics"

# Star Citizen API key (get from https://starcitizen-api.com/)
# Uncomment and add your key:
# export SC_API_KEY="your_api_key_here"

# Cargo build directory - use /tmp for faster builds (tmpfs/RAM)
# This avoids WSL filesystem overhead and speeds up compilation
export CARGO_TARGET_DIR="/tmp/cargo-target-sc-interdiction"

# Incremental compilation (speeds up rebuilds)
export CARGO_INCREMENTAL=1

# Add project .bin directory to PATH FIRST (wrappers for cargo, git, etc.)
# This must come before system cargo to intercept commands
PATH_add .bin

# Add project directory to PATH for make.cmd wrapper
# This allows running 'make.cmd build' from anywhere when in this project
PATH_add .

# Optional: Set number of parallel jobs (adjust based on CPU cores)
# export CARGO_BUILD_JOBS=8

# Optional: Enable faster linker (if installed)
# export RUSTFLAGS="-C link-arg=-fuse-ld=lld"

# Helper to find generated schema files (OUT_DIR is dynamic per build)
# Usage: cd $(schema_out_dir) or cat $(schema_out_dir)/generated_schema.rs
schema_out_dir() {
    find "$CARGO_TARGET_DIR/debug/build" -name "generated_schema.rs" -printf "%h\n" 2>/dev/null | head -1
}
export -f schema_out_dir
