#!/bin/bash
# Repository-specific git wrapper
# Enforces pre-commit hooks - blocks --no-verify flag

if [[ "$1" == "commit" ]]; then
    for arg in "$@"; do
        if [[ "$arg" == "--no-verify" ]] || [[ "$arg" == "-n" ]]; then
            echo ""
            echo "âŒ ERROR: --no-verify is not allowed in this repository!"
            echo ""
            echo "Pre-commit hooks must run to enforce code quality standards."
            echo "Fix the issues reported by the hooks before committing."
            echo ""
            exit 1
        fi
    done
fi

# Call the real system git dynamically
GIT_BIN="$(command -v git)"
if [[ -z "$GIT_BIN" ]]; then
    echo "ERROR: 'git' executable not found on PATH." >&2
    exit 1
fi

exec "$GIT_BIN" "$@"
