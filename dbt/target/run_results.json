{"metadata": {"dbt_schema_version": "https://schemas.getdbt.com/dbt/run-results/v5.json", "dbt_version": "1.7.0", "generated_at": "2026-01-08T02:39:57.315475Z", "invocation_id": "2345fa89-fcf3-4b27-a6b6-e0bb9e5312dc", "env": {}}, "results": [{"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:54.045586Z", "completed_at": "2026-01-08T02:39:54.083693Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:54.088273Z", "completed_at": "2026-01-08T02:39:54.574025Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.566988468170166, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.sc_interdiction.gold_location_distances", "compiled": true, "compiled_code": "-- Gold location distances: calculated distances between all location pairs\n-- Uses Euclidean distance formula: sqrt((x2-x1)^2 + (y2-y1)^2)\n-- Distances are in millions of km (Mkm)\n\nselect\n    c1.display_name as from_location,\n    c1.system_name as from_system,\n    c2.display_name as to_location,\n    c2.system_name as to_system,\n    c1.x_mkm as from_x,\n    c1.y_mkm as from_y,\n    c2.x_mkm as to_x,\n    c2.y_mkm as to_y,\n    sqrt(power(c2.x_mkm - c1.x_mkm, 2) + power(c2.y_mkm - c1.y_mkm, 2)) as distance_mkm,\n    sqrt(power(c2.x_mkm - c1.x_mkm, 2) + power(c2.y_mkm - c1.y_mkm, 2)) / 149.6 as distance_au\nfrom \"sc_interdiction\".\"raw_silver\".\"location_coordinates\" c1\ncross join \"sc_interdiction\".\"raw_silver\".\"location_coordinates\" c2\nwhere c1.display_name != c2.display_name\n  and c1.system_name = c2.system_name  -- Only same-system distances (cross-system needs jump points)", "relation_name": "\"sc_interdiction\".\"raw_gold\".\"gold_location_distances\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:54.079165Z", "completed_at": "2026-01-08T02:39:54.086381Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:54.209542Z", "completed_at": "2026-01-08T02:39:54.648497Z"}], "thread_id": "Thread-4 (worker)", "execution_time": 0.621800422668457, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.sc_interdiction.stg_shop_items", "compiled": true, "compiled_code": "-- Staging model for raw shop items\n\nselect\n    id,\n    shop_id,\n    item_id,\n    buy_price,\n    sell_price,\n    max_inventory,\n    created_at,\n    updated_at\nfrom raw.shop_items", "relation_name": "\"sc_interdiction\".\"raw_staging\".\"stg_shop_items\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:54.072399Z", "completed_at": "2026-01-08T02:39:54.084418Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:54.103321Z", "completed_at": "2026-01-08T02:39:54.657754Z"}], "thread_id": "Thread-3 (worker)", "execution_time": 0.6376051902770996, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.sc_interdiction.stg_quantum_routes", "compiled": true, "compiled_code": "-- Staging model for raw quantum routes\n\nselect\n    id,\n    from_location,\n    to_location,\n    distance,\n    created_at,\n    updated_at\nfrom raw.quantum_routes", "relation_name": "\"sc_interdiction\".\"raw_staging\".\"stg_quantum_routes\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:54.059945Z", "completed_at": "2026-01-08T02:39:54.085008Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:54.161793Z", "completed_at": "2026-01-08T02:39:54.660218Z"}], "thread_id": "Thread-2 (worker)", "execution_time": 0.6396756172180176, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.sc_interdiction.stg_locations", "compiled": true, "compiled_code": "-- Staging model for raw locations\n-- Reads from Diesel-managed raw.locations table\n\nselect\n    id,\n    name,\n    parent_id,\n    location_type,\n    nav_icon,\n    affiliation,\n    description,\n    is_scannable,\n    hide_in_starmap,\n    obstruction_radius,\n    arrival_radius,\n    arrival_point_offset,\n    adoption_radius,\n    created_at,\n    updated_at\nfrom raw.locations", "relation_name": "\"sc_interdiction\".\"raw_staging\".\"stg_locations\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:54.605292Z", "completed_at": "2026-01-08T02:39:54.611691Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:54.613043Z", "completed_at": "2026-01-08T02:39:54.764911Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.16832447052001953, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.sc_interdiction.stg_shops", "compiled": true, "compiled_code": "-- Staging model for raw shops\n\nselect\n    shop_id,\n    location_id,\n    shop_name,\n    created_at,\n    updated_at\nfrom raw.shops", "relation_name": "\"sc_interdiction\".\"raw_staging\".\"stg_shops\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:54.688307Z", "completed_at": "2026-01-08T02:39:54.706332Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:54.707389Z", "completed_at": "2026-01-08T02:39:56.600995Z"}], "thread_id": "Thread-4 (worker)", "execution_time": 1.9157719612121582, "adapter_response": {"_message": "SELECT 1915", "code": "SELECT", "rows_affected": 1915}, "message": "SELECT 1915", "failures": null, "unique_id": "model.sc_interdiction.silver_locations", "compiled": true, "compiled_code": "-- Silver locations: validated with display names and corrected hierarchy\n-- Uses recursive CTE to handle parent-child relationships\n-- Lagrange points are re-parented to their associated planets (game data incorrectly parents to star)\n\n\n\nwith recursive location_tree as (\n    -- Base case: root locations (no parent or parent doesn't exist in raw)\n    select\n        id,\n        name,\n        parent_id,\n        location_type,\n        nav_icon,\n        affiliation,\n        description,\n        is_scannable,\n        hide_in_starmap,\n        obstruction_radius,\n        arrival_radius,\n        arrival_point_offset,\n        adoption_radius,\n        created_at,\n        updated_at\n    from \"sc_interdiction\".\"raw_staging\".\"stg_locations\"\n    where parent_id is null\n       or parent_id not in (select id from \"sc_interdiction\".\"raw_staging\".\"stg_locations\")\n\n    union all\n\n    -- Recursive case: children of already-processed locations\n    select\n        r.id,\n        r.name,\n        r.parent_id,\n        r.location_type,\n        r.nav_icon,\n        r.affiliation,\n        r.description,\n        r.is_scannable,\n        r.hide_in_starmap,\n        r.obstruction_radius,\n        r.arrival_radius,\n        r.arrival_point_offset,\n        r.adoption_radius,\n        r.created_at,\n        r.updated_at\n    from \"sc_interdiction\".\"raw_staging\".\"stg_locations\" r\n    inner join location_tree lt on r.parent_id = lt.id\n),\n\n-- Get planet IDs for Lagrange point re-parenting\nlagrange_planet_ids as (\n    select\n        lp.loc_name,\n        lp.planet_loc_name,\n        lp.system_name,\n        stg.id as planet_id\n    from \"sc_interdiction\".\"raw_silver\".\"lagrange_planets\" lp\n    inner join \"sc_interdiction\".\"raw_staging\".\"stg_locations\" stg on stg.name = lp.planet_loc_name\n)\n\nselect\n    lt.id,\n    lt.name,\n    -- Re-parent Lagrange points to their associated planet, otherwise use original parent\n    coalesce(\n        lpi.planet_id,\n        case\n            when lt.parent_id in (select id from location_tree) then lt.parent_id\n            else null\n        end\n    ) as parent_id,\n    lt.location_type,\n    lt.nav_icon,\n    lt.affiliation,\n    lt.description,\n    lt.is_scannable,\n    lt.hide_in_starmap,\n    lt.obstruction_radius,\n    lt.arrival_radius,\n    lt.arrival_point_offset,\n    lt.adoption_radius,\n    dn.display_name,\n    lt.created_at,\n    lt.updated_at\nfrom location_tree lt\nleft join \"sc_interdiction\".\"raw_silver\".\"display_names\" dn on lt.name = dn.loc_name\nleft join lagrange_planet_ids lpi on lt.name = lpi.loc_name", "relation_name": "\"sc_interdiction\".\"raw_silver\".\"silver_locations\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:56.619237Z", "completed_at": "2026-01-08T02:39:56.638877Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:56.640465Z", "completed_at": "2026-01-08T02:39:56.779922Z"}], "thread_id": "Thread-2 (worker)", "execution_time": 0.17312955856323242, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.sc_interdiction.gold_locations", "compiled": true, "compiled_code": "-- Gold locations: denormalized view with parent names\n\nselect\n    l.id,\n    l.name,\n    l.display_name,\n    l.parent_id,\n    p.name as parent_name,\n    p.display_name as parent_display_name,\n    l.location_type,\n    l.nav_icon,\n    l.affiliation,\n    l.description,\n    l.is_scannable,\n    l.hide_in_starmap,\n    l.obstruction_radius,\n    l.arrival_radius,\n    l.arrival_point_offset,\n    l.adoption_radius\nfrom \"sc_interdiction\".\"raw_silver\".\"silver_locations\" l\nleft join \"sc_interdiction\".\"raw_silver\".\"silver_locations\" p on l.parent_id = p.id", "relation_name": "\"sc_interdiction\".\"raw_gold\".\"gold_locations\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:56.631903Z", "completed_at": "2026-01-08T02:39:56.653790Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:56.656527Z", "completed_at": "2026-01-08T02:39:56.859370Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.24646711349487305, "adapter_response": {"_message": "SELECT 108", "code": "SELECT", "rows_affected": 108}, "message": "SELECT 108", "failures": null, "unique_id": "model.sc_interdiction.silver_shops", "compiled": true, "compiled_code": "-- Silver shops: validated with foreign key integrity\n\n\n\nselect\n    s.shop_id,\n    case\n        when s.location_id in (select id from \"sc_interdiction\".\"raw_silver\".\"silver_locations\")\n        then s.location_id\n        else null\n    end as location_id,\n    s.shop_name,\n    s.created_at,\n    s.updated_at\nfrom \"sc_interdiction\".\"raw_staging\".\"stg_shops\" s", "relation_name": "\"sc_interdiction\".\"raw_silver\".\"silver_shops\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:56.625103Z", "completed_at": "2026-01-08T02:39:56.654685Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:56.670453Z", "completed_at": "2026-01-08T02:39:56.873362Z"}], "thread_id": "Thread-3 (worker)", "execution_time": 0.2729978561401367, "adapter_response": {"_message": "SELECT 0", "code": "SELECT", "rows_affected": 0}, "message": "SELECT 0", "failures": null, "unique_id": "model.sc_interdiction.silver_quantum_routes", "compiled": true, "compiled_code": "-- Silver quantum routes: validated with foreign keys to locations\n\n\n\nselect\n    r.id,\n    r.from_location,\n    r.to_location,\n    r.distance,\n    r.created_at,\n    r.updated_at\nfrom \"sc_interdiction\".\"raw_staging\".\"stg_quantum_routes\" r\nwhere r.from_location in (select id from \"sc_interdiction\".\"raw_silver\".\"silver_locations\")\n  and r.to_location in (select id from \"sc_interdiction\".\"raw_silver\".\"silver_locations\")", "relation_name": "\"sc_interdiction\".\"raw_silver\".\"silver_quantum_routes\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:56.874512Z", "completed_at": "2026-01-08T02:39:56.891262Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:56.894572Z", "completed_at": "2026-01-08T02:39:56.990653Z"}], "thread_id": "Thread-4 (worker)", "execution_time": 0.12969708442687988, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.sc_interdiction.gold_shops", "compiled": true, "compiled_code": "-- Gold shops: denormalized view with location info\n\nselect\n    s.shop_id,\n    s.location_id,\n    l.name as location_name,\n    l.display_name as location_display_name,\n    l.location_type,\n    s.shop_name\nfrom \"sc_interdiction\".\"raw_silver\".\"silver_shops\" s\nleft join \"sc_interdiction\".\"raw_silver\".\"silver_locations\" l on s.location_id = l.id", "relation_name": "\"sc_interdiction\".\"raw_gold\".\"gold_shops\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:56.915137Z", "completed_at": "2026-01-08T02:39:56.923385Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:56.924518Z", "completed_at": "2026-01-08T02:39:56.995975Z"}], "thread_id": "Thread-1 (worker)", "execution_time": 0.0885171890258789, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.sc_interdiction.gold_quantum_routes", "compiled": true, "compiled_code": "-- Gold quantum routes: denormalized view with location names\n\nselect\n    r.id,\n    r.from_location,\n    f.name as from_name,\n    f.display_name as from_display_name,\n    f.location_type as from_type,\n    r.to_location,\n    t.name as to_name,\n    t.display_name as to_display_name,\n    t.location_type as to_type,\n    r.distance\nfrom \"sc_interdiction\".\"raw_silver\".\"silver_quantum_routes\" r\nleft join \"sc_interdiction\".\"raw_silver\".\"silver_locations\" f on r.from_location = f.id\nleft join \"sc_interdiction\".\"raw_silver\".\"silver_locations\" t on r.to_location = t.id", "relation_name": "\"sc_interdiction\".\"raw_gold\".\"gold_quantum_routes\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:56.880480Z", "completed_at": "2026-01-08T02:39:56.893827Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:56.904270Z", "completed_at": "2026-01-08T02:39:57.213618Z"}], "thread_id": "Thread-2 (worker)", "execution_time": 0.34523439407348633, "adapter_response": {"_message": "SELECT 12148", "code": "SELECT", "rows_affected": 12148}, "message": "SELECT 12148", "failures": null, "unique_id": "model.sc_interdiction.silver_shop_items", "compiled": true, "compiled_code": "-- Silver shop items: validated with foreign key to shops\n\n\n\nselect\n    si.id,\n    si.shop_id,\n    si.item_id,\n    si.buy_price,\n    si.sell_price,\n    si.max_inventory,\n    si.created_at,\n    si.updated_at\nfrom \"sc_interdiction\".\"raw_staging\".\"stg_shop_items\" si\nwhere si.shop_id in (select shop_id from \"sc_interdiction\".\"raw_silver\".\"silver_shops\")", "relation_name": "\"sc_interdiction\".\"raw_silver\".\"silver_shop_items\""}, {"status": "success", "timing": [{"name": "compile", "started_at": "2026-01-08T02:39:57.221387Z", "completed_at": "2026-01-08T02:39:57.232315Z"}, {"name": "execute", "started_at": "2026-01-08T02:39:57.236041Z", "completed_at": "2026-01-08T02:39:57.295195Z"}], "thread_id": "Thread-3 (worker)", "execution_time": 0.07732748985290527, "adapter_response": {"_message": "CREATE VIEW", "code": "CREATE VIEW", "rows_affected": -1}, "message": "CREATE VIEW", "failures": null, "unique_id": "model.sc_interdiction.gold_shop_items", "compiled": true, "compiled_code": "-- Gold shop items: denormalized view with shop and location info\n\nselect\n    si.id,\n    si.shop_id,\n    s.shop_name,\n    s.location_id,\n    l.name as location_name,\n    l.display_name as location_display_name,\n    si.item_id,\n    si.buy_price,\n    si.sell_price,\n    si.max_inventory,\n    case\n        when si.buy_price > 0 and si.sell_price > 0\n        then round(((si.sell_price - si.buy_price) / si.buy_price * 100)::numeric, 2)\n        else 0\n    end as profit_margin_pct\nfrom \"sc_interdiction\".\"raw_silver\".\"silver_shop_items\" si\njoin \"sc_interdiction\".\"raw_silver\".\"silver_shops\" s on si.shop_id = s.shop_id\nleft join \"sc_interdiction\".\"raw_silver\".\"silver_locations\" l on s.location_id = l.id", "relation_name": "\"sc_interdiction\".\"raw_gold\".\"gold_shop_items\""}], "elapsed_time": 3.5142221450805664, "args": {"log_format_file": "debug", "exclude": [], "log_path": "/usr/app/logs", "enable_legacy_logger": false, "printer_width": 80, "invocation_command": "dbt run", "select": [], "indirect_selection": "eager", "introspect": true, "which": "run", "static_parser": true, "macro_debugging": false, "warn_error_options": {"include": [], "exclude": []}, "use_colors": true, "project_dir": "/usr/app", "print": true, "cache_selected_only": false, "quiet": false, "profiles_dir": "/usr/app", "log_file_max_bytes": 10485760, "version_check": true, "use_colors_file": true, "log_format": "default", "strict_mode": false, "write_json": true, "show_resource_report": false, "send_anonymous_usage_stats": true, "log_level": "info", "log_level_file": "debug", "vars": {}, "partial_parse": true, "defer": false, "populate_cache": true, "partial_parse_file_diff": true, "favor_state": false}}